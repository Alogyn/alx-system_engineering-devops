#!/usr/bin/env bash
# Gracefully reloads Gunicorn by sending SIGHUP to the master process

# Find the Gunicorn master process ID
gunicorn_master_pid=$(pgrep -f 'gunicorn.*master')

if [ -z "$gunicorn_master_pid" ]; then
    echo "No Gunicorn master process found."
    exit 1
fi

# Reload Gunicorn gracefully
echo "Sending SIGHUP to Gunicorn master process (PID: $gunicorn_master_pid)..."
kill -HUP "$gunicorn_master_pid"

echo "Graceful reload complete"
